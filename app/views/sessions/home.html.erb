<ul>
  <%if @current_user.is_admin%>
      <li>[ADMIN] <a href="/users">Gestion des utilisateurs</a></li>

  <%end%>
  <li><%= link_to 'Nouvelle demande', new_user_vacance_path(@current_user) %></li>
</ul>


<h2>Mes vacances</h2>

<table border =1>
  <thead>
  <tr>
    <th>Date de la demande</th>
    <th>Date de début</th>
    <th>Date de fin</th>
    <th>Jours ouvrables</th>
    <th>Commentaires</th>
    <th>Status</th>
    <th colspan="3">Action</th>
  </tr>
  </thead>

  <tbody>
  <% @my_vacances.each do |v| %>
      <tr>
        <td><%= v.updated_at %></td>
        <td><%= v.date_start %></td>
        <td><%= v.date_end %></td>
        <td><%= v.business_days_between %></td>
        <td><%= v.commentaire %></td>
        <td><%= v.get_approbation_decision_s %></td>
               <td><%= link_to 'Edit', edit_user_vacance_path(v.user,v) %></td>
        <td>
          <%=link_to 'Delete', user_vacance_path(v.user,v), method: :delete, data: { confirm: 'Etes vous certain de vouloir supprimer cette demande?' }%>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>



<%if @current_user.is_admin || @current_user.is_gestionnaire %>




<h2>Approbation en attente</h2>


<table border =1>
  <thead>
  <tr>
    <th>Utilisateur</th>
    <th>Date de la demande</th>
    <th>Date de début</th>
    <th>Date de fin</th>
    <th>Jours ouvrables</th>
    <th>Commentaires</th>
    <th colspan="3">Action</th>
  </tr>
  </thead>

  <tbody>
  <% @vacances_wainting_approb.each do |v| %>
      <tr>
        <td><%= v.user.username %></td>
        <td> <%= v.updated_at %></td>
        <td><%= v.date_start %></td>
        <td><%= v.date_end %></td>
        <td><%= v.business_days_between %></td>
        <td><%= v.commentaire %></td>

        <td><%= link_to "Approuver la demande", vacance_set_approbation_path(v)%></td>
        <td><%= link_to "Refuser la demande", vacance_set_refuser_path(v) %></td>

        </td>
      </tr>
  <% end %>
  </tbody>
</table>

<% end %>